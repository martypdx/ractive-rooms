{"version":3,"sources":["/Users/marty/dev/ractive-rooms/assets/js/ractive-decorator-stroll.js"],"names":[],"mappings":"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","file":"/Users/marty/dev/ractive-rooms/.gobble-build/08-babel/1/ractive-decorator-stroll.js","sourcesContent":["export default function stroll(node, property, max){\n\n    var ractive = this,\n        pointer = false,\n        handler = {\n            start: function(){\n                // pointer = true\n            },\n            move: function(values){\n                ractive.set(property, values.offset)\n\n                // console.log(values.offset, values.delta)\n\n                // if(pointer) { return }\n\n                // if(Math.abs(values.delta) < 2) {\n                //     ractive.fire('stop')\n                // }\n            },\n            release: function(){\n                // pointer = false\n                // ractive.fire('start')\n            },\n            end: function(){\n                // ractive.fire('stop')\n            }\n        }\n\n    var scroll = scroller(\n        document,\n        node,\n        max,\n        handler\n    );\n    scroll.start();\n\n    return {\n        teardown: function(){\n            if(scroll){\n                scroll.stop()\n            }\n        }\n    }\n}\n\n\n\nfunction scroller(listenOn, toScroll, max, handler){\n\n    var min, offset, reference, pressed,\n        velocity, frame, timestamp, ticker,\n        amplitude, target, timeConstant;\n\n    return {\n        start: start,\n        stop: stop\n    }\n\n    function start() {\n        if (typeof window.ontouchstart !== 'undefined') {\n            listenOn.addEventListener('touchstart', tap);\n            listenOn.addEventListener('touchmove', drag);\n            listenOn.addEventListener('touchend', release);\n        }\n        listenOn.addEventListener('mousedown', tap);\n        listenOn.addEventListener('mousemove', drag);\n        listenOn.addEventListener('mouseup', release);\n\n        offset = min = 0;\n        pressed = false;\n        timeConstant = 325; // ms\n\n    };\n\n    function stop() {\n\n        if (typeof window.ontouchstart !== 'undefined') {\n            listenOn.removeEventListener('touchstart', tap);\n            listenOn.removeEventListener('touchmove', drag);\n            listenOn.removeEventListener('touchend', release);\n        }\n        listenOn.removeEventListener('mousedown', tap);\n        listenOn.removeEventListener('mousemove', drag);\n        listenOn.removeEventListener('mouseup', release);\n    }\n\n    function ypos(e) {\n        // touch event\n        if (e.targetTouches && (e.targetTouches.length >= 1)) {\n            return e.targetTouches[0].clientY;\n        }\n\n        // mouse event\n        return e.clientY;\n    }\n\n    function scroll(y) {\n\n        var delta = y-offset\n        offset = (y > min) ? min : (y < -max) ? -max : y;\n        handler.move({\n            offset: offset,\n            delta: delta\n        })\n    }\n\n    function track() {\n        var now, elapsed, delta, v;\n\n        now = Date.now();\n        elapsed = now - timestamp;\n        timestamp = now;\n        delta = offset - frame;\n        frame = offset;\n\n        v = 1000 * delta / (1 + elapsed);\n        velocity = 0.8 * v + 0.2 * velocity;\n    }\n\n    function autoScroll() {\n        var elapsed, delta;\n\n        if (amplitude) {\n            elapsed = Date.now() - timestamp;\n            delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            if (delta > 0.5 || delta < -0.5) {\n                scroll(target + delta);\n                if (offset === min || offset === -max){\n                    handler.end(target)\n                    return\n                }\n                requestAnimationFrame(autoScroll);\n            } else {\n                scroll(target);\n                handler.end(target)\n            }\n        }\n    }\n\n    function tap(e) {\n        pressed = true;\n        reference = ypos(e);\n\n        velocity = amplitude = 0;\n        frame = offset;\n        timestamp = Date.now();\n        clearInterval(ticker);\n        ticker = setInterval(track, 30);\n\n        handler.start()\n\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    function drag(e) {\n        var y, delta;\n        if (pressed) {\n            y = ypos(e);\n            delta = reference - y;\n            if (delta > 2 || delta < -2) {\n                reference = y;\n                var mark = offset + delta\n                scroll(mark);\n            }\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n    function release(e) {\n        pressed = false;\n\n        handler.release()\n\n        clearInterval(ticker);\n        if (velocity > 10 || velocity < -10) {\n            amplitude = 0.8 * velocity;\n\n            target = Math.round(offset + amplitude);\n            timestamp = Date.now();\n            requestAnimationFrame(autoScroll);\n        } else {\n            handler.end(offset)\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n\n}\n"]}